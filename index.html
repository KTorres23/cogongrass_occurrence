<!DOCTYPE html>
<html>
  <head>
    <!-- mobile-first design -->
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />

    <title>Invasive Cogongrass Occurrence</title>

    <!-- Link to external CSS file -->
    <link rel="stylesheet" href="styles.css" />

    <!-- import css and libraries for esri.js -->
    <link rel="stylesheet" href="https://js.arcgis.com/4.26/esri/themes/light/main.css" />

    <!-- Link to Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Oswald:wght@700&display=swap" />

    <!-- Slick Carousel CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"/>
  </head>

  <body>
    <div id="banner"><strong>Invasive Cogongrass Occurrence</strong></div>
    <div id="subBanner">
      <ul>
        <li>Spreads rapidly</li>
        <li>Outcompetes native vegetation</li>
        <li>Difficult to control</li>
      </ul>
    </div>
    <div id="container">
      <div id="sidebar">
        <h2>Search Query Placeholder</h2>
        <p>Placeholders...</p></div>
      <div id="resizer"></div>
      <div id="viewDiv"></div>
    </div>

    <div id="bot_banner"><strong> Quick Facts About Invasive Cogongrass </strong></div>
    
    <div id="bot_container">
      <div id="bot_leftbar">
        <h2>Quick Facts</h2>
        <ul>
          <li>Native to Southeast Asia</li>
          <li>Introduced to the U.S. in the early 1900s</li>
          <li>Found in 73 countries</li>
          <li>Spreads by rhizomes and seeds</li>
          <li>Can grow up to 6 feet tall</li>
          <li>Forms dense stands that outcompete native vegetation</li>
          <li>Difficult to control</li>
        </ul>

        <h2>Control Methods</h2>
        <ul>
          <li>Herbicides</li>
          <li>Prescribed burning</li>
          <li>Biological control</li>
          <li>Manual removal</li>
          <li>Prevention</li>
        </ul>

      </div>
      
      <div id="bot_rightbar">
        <!-- Image Carousel -->
        <div class="carousel">
          <div><img src="image1.jpg" alt="Image 1"></div>
          <div><img src="image2.jpg" alt="Image 2"></div>
          <div><img src="image3.jpg" alt="Image 3"></div>
        </div>

        <!-- Carousel caption -->
        <div class="carousel_caption">
          <img src="swipe.png" alt="Swipe Icon" class="swipe_icon">
          <p>Swipe left or right to see more images!</p>
        </div>

      </div>

    </div>

    <!-- Add Record button -->
    <a href="https://arcg.is/G08uW0" target="_blank" class="addRecordBtn">Report an observation</a>

    <!-- Include jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Slick Carousel JavaScript -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

    <!-- Initialize Slick Carousel -->
    <script type="text/javascript">
      $(document).ready(function(){
        $('.carousel').slick({
          dots: true,
          infinite: true,
          speed: 300,
          slidesToShow: 1,
          adaptiveHeight: true
        });
      });
    </script>

    <!-- Load ArcGIS API separately -->
    <script src="https://js.arcgis.com/4.26/"></script>
    <script>
      require([
        "esri/config",
        "esri/Map",
        "esri/views/MapView",
        "esri/widgets/Locate",
        "esri/widgets/Search",
        "esri/layers/FeatureLayer",
        "esri/widgets/Legend",
        "esri/widgets/LayerList"
      ], function(esriConfig, Map, MapView, Locate, Search, FeatureLayer, Legend, LayerList) {
        esriConfig.apiKey = "AAPTxy8BH1VEsoebNVZXo8HurDKwg_xacEwEedlXdUDyJ7P-7Qbg6QwjB-VtI5cUmAZMi_mWKOS0Vo0J49DRO-0J1pP0__52Rw9RjcLIXbVib3NGIPqd05v5bJLJV72gKKaZ9YkXNs7vzI0H2rf2ZDaRG0YJIXAI9DX-3IngC9SL_rzfc3EVbzlgr9obb-jV-Uwz063O_Kvrm2St2D_Eay2k0CwVj5Jd4vRShs708LiyuLs.AT1_UdS3K7WT";

        const map = new Map({
          basemap: "topo-vector"
        });

        const view = new MapView({
          container: "viewDiv",
          map: map,
          center: [-86.873290, 30.787528], // Coords for Blackwater River State Forest, FL
          zoom: 11
        });

        const locateBtn = new Locate({
          view: view
        });

        const searchWidget = new Search({
          view: view
        });

        // Add locate widget to the top left corner of the view
        view.ui.add(locateBtn, {
          position: "top-left",
          index: 0
        });

        // Add search widget to the top right corner of the view
        view.ui.add(searchWidget, {
          position: "top-left",
          index: 1
        });

        // Add Legend widget
        const legend = new Legend({
          view: view
        });
        view.ui.add(legend, "bottom-right");

        // Add LayerList widget
        const layerList = new LayerList({
          view: view
        });
        view.ui.add(layerList, "top-right");

        // Load layers
        require(["./layers.js"], function(layers) {
          layers.addLayers(map);
        });

        // Load popups
        require(["./popups.js"], function(popups) {
          popups.addPopups(view);
        });

        // Resizing functionality
        const resizer = document.getElementById('resizer');
        const sidebar = document.getElementById('sidebar');
        const viewDiv = document.getElementById('viewDiv');

        let isResizing = false;

        resizer.addEventListener('mousedown', function(e) {
          isResizing = true;
          document.addEventListener('mousemove', resize);
          document.addEventListener('mouseup', stopResize);
        });

        function resize(e) {
          if (isResizing) {
            const newWidth = e.clientX;
            sidebar.style.width = `${newWidth}px`;
            viewDiv.style.width = `calc(100% - ${newWidth + 10}px)`;
            view.resize();
          }
        }

        function stopResize() {
          isResizing = false;
          document.removeEventListener('mousemove', resize);
          document.removeEventListener('mouseup', stopResize);
        }
      });
    </script>

    <!-- Link to external JavaScript file -->
    <script src="main.js"></script>

  </body>
</html>